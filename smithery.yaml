runtime: typescript
build:
  beforeBuild: |
    echo "Installing Node.js dependencies..."
    npm ci
    echo "Node.js dependencies installed successfully"

    echo "Setting up Python environment..."
    # Ensure Python is available - install if needed
    apt-get update && apt-get install -y python3 python3-pip python3-venv

    # Create a symlink to make python available as well
    ln -sf /usr/bin/python3 /usr/bin/python

    echo "Installing Python dependencies..."
    python3 -m pip install --upgrade pip
    python3 -m pip install --break-system-packages -r requirements.txt
    echo "Python dependencies installed successfully"

    # Verify installations
    echo "Python version: $(python3 --version)"
    echo "Python location: $(which python3)"
    echo "Python3 location: $(which python)"
startCommand:
  type: http
  configSchema:
    type: object
    properties:
      debug:
        type: boolean
        description: Enable debug logging
        default: false
  exampleConfig:
    debug: false
